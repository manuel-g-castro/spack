# for compute nodes

spack:
  definitions:
    #
    # packages to be compiled with fj
    #
    - fjs:
      - abinit@8.10.2 %fj +openmp optimization-flavor=aggressive ^fujitsu-fftw
      - adios2 %fj
#      - alps %fj # cannot be installed
      - batchedblas %fj
      - bcftools %fj
      - bedtools2 %fj
      - biobambam2 %fj
      - boost %fj +atomic+chrono+date_time+exception+filesystem+graph+iostreams+locale+log+math+program_options+random+regex+serialization+signals+system+test+thread+timer+wave
      - bwa %fj
      - cblas %fj
      - cmake %fj
      - dssp %fj
      - eigen %fj
      - eigenexa %fj
      - fujitsu-fftw %fj
      - fujitsu-frontistr@5.0 %fj
      - fujitsu-ssl2 %fj
      - grads %fj
      - h5z-zfp %fj
      - hdf5 %fj +cxx+fortran
      - htslib@1.12 %fj
      - improved-rdock %fj
      - julia %fj
      - lis %fj
#      - llvm %fj  ^binutils@2.37~nls # "because no binutils+ld in /usr"
      - llvm %fj
      - mapsplice2 %fj
      - metis %fj
#      - mesa %fj ^llvm/xxxxx # to avoid a concretization error in llvm
      - mptensor %fj
      - netcdf-c %fj
      - netcdf-cxx %fj
      - netcdf-cxx4 %fj
      - netcdf-fortran %fj
      - netlib-scalapack %fj
      - octa %fj
      - onednn %fj
      - openblas %fj
      - openfdtd@2.6.0 %fj +mpi
      - openjdk %fj
#      - openmx %fj
      - parallel-netcdf %fj
      - paraview+osmesa+python3 %fj
      - parmetis %fj
      - petsc%fj
      - pfapack %fj
      - picard %fj
      - povray %fj ~mkl ^boost@1.74.0
      - py-ase %fj
      - py-dask %fj
      - py-h5py %fj
      - py-horovod %fj
      - py-hypothesis %fj
      - py-jupyterhub %fj
      - py-keras %fj
      - py-matplotlib %fj
      - py-netcdf4 %fj
      - py-pandas %fj
      - py-pip %fj
      - py-pydmd %fj
      - py-pygps %fj
      - py-pymol %fj
      - py-pytest %fj
      - py-pysam %fj ^py-setuptools@57.4.0 # can be installed with setuptools@57.4.0 or older
      - py-scikit-learn %fj
      - py-scipy %fj
      - py-seaborn %fj
      - py-spglib %fj
      - py-toml %fj
      - py-xarray %fj
      - py-pytoml %fj
      - r %fj
      - raja %fj
      - rdkit %fj
      - samtools %fj ^ncurses@6.2 ^htslib@1.12 # "because ncurses-dev in /usr is incomplete"
      - scale %fj
      - screen %fj
      - scsumma25d %fj
      - star %fj
      - suite-sparse %fj
      - tmux %fj
#      - wrf@3.9.1.1 %fj build_type=dm+sm # export PATH=/usr/libexec/gcc/aarch64-redhat-linux/8:$PATH
      - xios %fj
      - zpares %fj

    #
    # packages to be compiled with gcc
    #
    - gccs:
      - gcc %gcc
      - llvm %gcc ^binutils@2.37~nls # "because no binutils+ld in /usr"
#      - process-in-process@2 %gcc # cannot be installed
#      - process-in-process@3 %gcc # cannot be installed

    #
    # packages from local-repo ("Fugaku" packages)
    #
    - local_repo:
      - blitz %fj
      - cp2k@7.1 %fj
      - fujitsu-mpi %fj
      - fujitsu-mpi %gcc
      - genesis %fj
      - gmt %fj
      - gmt %gcc
      - kokkos %fj +openmp
      - n2p2 %fj
      - netlib-lapack %fj
      - nwchem@master %fj
      - py-mpi4py %fj
      - py-numpy %fj
      - siesta %fj

    - local_repo_external:
      - abinitmp@1-22 %fj
      - abinitmp@2-4 %fj
      - mpich-tofu %fj +mt
      - mpich-tofu %fj ~mt
      - mpich-tofu %gcc +mt
      - mpich-tofu %gcc ~mt
      - ntchem %fj

  specs:
    - $fjs
    - $gccs
    - $local_repo
    - $local_repo_external
    

