# for compute nodes

spack:
  definitions:
    #
    # packages to be compiled with fj
    #
    - fjs:
#      - abinit@8.10.2 %fj +openmp optimization-flavor=aggressive ^fujitsu-fftw
      - adios2 %fj
#      - alps %fj # cannot be installed
      - batchedblas %fj
      - bcftools %fj ^htslib@1.12
      - bedtools2 %fj
      - biobambam2 %fj
      - boost %fj
      - bwa %fj
      - cbc %fj
      - cblas %fj
      - cmake %fj +ownlibs
      - dssp %fj
      - eigen %fj
      - eigenexa %fj
      - fugaku-frontistr %fj
      - fujitsu-fftw %fj
      - fujitsu-ssl2 %fj
      - grads %fj ^pcre2@10.39
      - h5z-zfp %fj
      - hdf5 %fj +cxx+fortran+hl
      - htslib@1.12 %fj
      - improved-rdock %fj ^pcre2@10.39 ^gobject-introspection@1.56.1 ^pango@1.42.4
      - julia %fj
      - lis %fj
#      - llvm %fj  ^binutils@2.37~nls # "because no binutils+ld in /usr"
      - llvm %fj ^libedit@3.1-20210216 ^hwloc~pci
      - mapsplice2 %fj ^samtools/xxxxx
      - metis %fj
#      - mesa %fj ^llvm/xxxxx # to avoid a concretization error in llvm
      - mptensor %fj
      - netcdf-c %fj
      - netcdf-cxx %fj
      - netcdf-cxx4 %fj
      - netcdf-fortran %fj
      - netlib-scalapack %fj
      - octa %fj
      - onednn %fj
      - openblas %fj
      - openfdtd@2.6.0 %fj +mpi
      - openjdk %fj
      - openmx %fj
      - parallel-netcdf %fj
      - paraview %fj ~qt+osmesa+python3 ^llvm@12.0.1 ^libedit@3.1-20210216 ^hwloc~pci ^lz4@1.9.4
      - paraview %fj ~qt+osmesa+python3~shared ^llvm@12.0.1 ^libedit@3.1-20210216 ^hwloc~pci ^lz4@1.9.4
      - parmetis %fj
      - petsc%fj
      - pfapack %fj
      - picard %fj
      - povray %fj ~mkl
      - py-ase %fj
      - py-dask %fj
      - py-h5py %fj
      - py-horovod %fj
      - py-horovod %fj tensor_ops=mpi ~cuda ^py-torch ~mkldnn
      - py-hypothesis %fj
      - py-jupyterhub %fj
      - py-keras %fj  ^libtool@2.4.7
      - py-matplotlib %fj
      - py-netcdf4 %fj
      - py-pandas %fj
      - py-pip %fj
      - py-pydmd %fj
      - py-pygps %fj
      - py-pymol %fj
      - py-pytest %fj
      - py-pysam %fj ^samtools/xxxx
      - py-scikit-learn %fj
      - py-scipy %fj
      - py-seaborn %fj
      - py-spglib %fj
      - py-toml %fj
      - py-xarray %fj
      - py-pytoml %fj
      - r %fj
      - raja %fj
      - rdkit %fj
      - samtools %fj ^ncurses@6.3 ^htslib@1.12 # "because ncurses-dev in /usr is incomplete"
      - scale %fj
      - screen %fj
      - scsumma25d %fj
      - star %fj
      - suite-sparse %fj
      - tmux %fj
      - wrf@3.9.1.1 %fj build_type=dm+sm # export PATH=/usr/libexec/gcc/aarch64-redhat-linux/8:$PATH
      - wrf %fj build_type=dm+sm # export PATH=/usr/libexec/gcc/aarch64-redhat-linux/8:$PATH
      - xios %fj
      - zpares %fj

    #
    # packages to be compiled with gcc
    #
    - gccs:
      - gcc %gcc@8.5.0
#      - llvm %gcc@8.5.0 ^binutils@2.37~nls # "because no binutils+ld in /usr"
      - llvm %gcc@8.5.0
#      - process-in-process@2 %gcc@8.5.0 # cannot be installed
#      - process-in-process@3 %gcc@8.5.0 # cannot be installed

    #
    # packages from local-repo ("Fugaku" packages)
    #
    - local_repo:
      - blitz %fj
      - cpmd %fj # "-j 1" needed
      - cp2k@7.1 %fj smm=blas ~libint ~libxc
      - darshan-runtime%fj scheduler=fj ldflags=-Knolargepage
      - fujitsu-mpi %fj
#      - fujitsu-mpi %gcc@8.5.0
      - genesis %fj
      - gmt %fj +blas +lapack
      - gmt %gcc@8.5.0
      - kokkos %fj +openmp
      - n2p2 %fj
      - netlib-lapack %fj
      - nwchem@master %fj +mpipr
      - py-mpi4py %fj
      - py-numpy %fj
      - siesta %fj

    - local_repo_external:
      - abinitmp@1-22 %fj
      - abinitmp@2-4 %fj
      - mpich-tofu %fj +mt
      - mpich-tofu %fj ~mt
      - mpich-tofu %gcc@8.5.0 +mt
      - mpich-tofu %gcc@8.5.0 ~mt
      - ntchem %fj

  specs:
    - $fjs
    - $gccs
    - $local_repo
    - $local_repo_external
    

